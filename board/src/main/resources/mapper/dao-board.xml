<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- dao 작성 -->
<!-- namespace : implememts와 같은 기능 -->
<mapper namespace="board.rest.api.mapper.BoardMapper">
	<resultMap type="BoardDto" id="boardResultMap">
		<id 			column="board_idx" 				property="boardIdx"/>
		<result 	column="title" 							property="title"/>
		<result 	column="contents" 					property="contents"/>
		<result 	column="hit_cnt" 						property="hitCnt"/>
		<result 	column="created_datetime" 	property="createdDatetime"/>
		<result 	column="creator_id" 				property="creatorId"/>
		<result 	column="updated_datetime" property="updatedDatetime"/>
		<result 	column="updater_id" 				property="updaterId"/>
		<result 	column="deleted_yn" 				property="deletedYn"/>
	</resultMap>
	
	<insert id="insertBoard" parameterType="BoardDto">
		/* 게시글 등록 */
		<![CDATA[
			INSERT INTO t_board
			(
				title,
				contents,
				created_datetime,
				creator_id
			)
			VALUES
			(	#{title},
				#{contents},
				NOW(),
				'admin'
			)
		]]>
	</insert>

	<select id="selectBoardList" resultMap="boardResultMap">
		/* 게시글 내역 조회 */
		<![CDATA[
			SELECT
				board_idx,
				title,
				hit_cnt,
				created_datetime
			FROM
				t_board
			WHERE
				deleted_yn = 'N'
			ORDER BY board_idx DESC		
		]]>		
	</select>
</mapper>